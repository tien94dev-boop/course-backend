# ------------------------------------------------------
# THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
# ------------------------------------------------------

type Course {
  id: ID!
  code: String!
  title: String
  description: String
  teacherId: ID
}

type CourseMutationResponse {
  success: Boolean!
  message: String
  data: Course
}

type ClassGroup {
  _id: ID!
  grade: Int!
  name: String!
  schoolYear: String
}

type MCOption {
  id: ID!
  choice: String
  description: String
}

type QuestionDetail {
  id: ID!
  question: String!
  answer: String!
  mcOptions: [MCOption!]
  questionType: QuestionType!
}

enum QuestionType {
  MC
  ES
}

type AiGenerateResponse {
  questions: [QuestionDetail!]
}

type User {
  id: ID!
  name: String!
  code: String!
  email: String!
  dateOfBirth: DateTime!
  role: String!
}

"""
A date-time string at UTC, such as 2019-12-03T09:54:33Z, compliant with the date-time format.
"""
scalar DateTime

type UserMutationResponse {
  success: Boolean!
  message: String
  data: User
}

type ChangedPayload {
  operation: String!
  data: JSON!
}

"""
The `JSON` scalar type represents JSON values as specified by [ECMA-404](http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-404.pdf).
"""
scalar JSON

type Chapter {
  id: ID!
  title: String
  description: String
  courseId: ID!
  teacherId: ID!
  order: Int
}

type ChapterMutationResponse {
  success: Boolean!
  message: String
  data: Chapter
}

type QuestionTypeObject {
  id: ID!
  type: QuestionType
  numberOfQuestions: Float
}

type Lesson {
  id: ID!
  questions: [QuestionDetail!]
  title: String
  description: String
  content: String
  chapterId: ID
  teacherId: ID
  type: LessonType!
  questionTypeObjects: [QuestionTypeObject!]
  link: String
}

enum LessonType {
  TEXT
  FILE
  EXERCISE
}

type LessonMutationResponse {
  success: Boolean!
  message: String
  data: Lesson
}

type AuthPayload {
  success: Boolean!
  message: String!
  accessToken: String
  user: User
}

type RefreshPayload {
  success: String!
  message: String!
  accessToken: String
}

type LogoutResponse {
  success: Boolean!
  message: String!
}

type Query {
  courses(filter: CourseFilterInput!): [Course!]!
  course(id: ID!): Course!
  classGroups: [ClassGroup!]!
  me: User!

  """Lấy danh sách toàn bộ sinh viên"""
  allUsers(filter: FilterUserInput!): [User!]!

  """Lấy thông tin chi tiết một sinh viên"""
  getUser(id: ID!): User!

  """Lấy danh sách toàn bộ chương học"""
  chapters(filter: FilterChapterInput): [Chapter!]!

  """Lấy thông tin chi tiết một chương học"""
  chapter(id: ID!): Chapter!

  """Lấy danh sách toàn bộ bài học"""
  allLessons(filter: FilterLessonInput): [Lesson!]!

  """Lấy thông tin chi tiết một bài học"""
  getLesson(id: ID!): Lesson!
}

input CourseFilterInput {
  name: String
  description: String
  teacherId: ID
}

input FilterUserInput {
  role: UserRole!
}

enum UserRole {
  STUDENT
  TEACHER
  ADMIN
}

input FilterChapterInput {
  title: String
  description: String
  courseId: String
  teacherId: String
}

input FilterLessonInput {
  chapterId: String
  teacherId: String
}

type Mutation {
  createCourse(input: CreateCourseInput!): CourseMutationResponse!
  updateCourse(input: UpdateCourseInput!): CourseMutationResponse!
  deleteCourse(id: ID!): CourseMutationResponse!
  createClassGroup(grade: Int!, name: String!, schoolYear: String): ClassGroup!
  aiGenerateQuestion(input: AiGenerateInput!): AiGenerateResponse!

  """Tạo mới một sinh viên vào hệ thống"""
  createUser(input: CreateUserInput!): UserMutationResponse!
  updateUser(input: UpdateUserInput!): UserMutationResponse!

  """Tạo mới một chương học vào hệ thống"""
  createChapter(input: CreateChapterInput!): ChapterMutationResponse!

  """Cập nhật thông tin một chương học"""
  updateChapter(input: UpdateChapterInput!): ChapterMutationResponse!

  """Xóa mềm một chương học khỏi hệ thống"""
  deleteChapter(id: ID!): ChapterMutationResponse!

  """Tạo mới một bài học vào hệ thống"""
  createLesson(input: CreateLessonInput!): LessonMutationResponse!

  """Cập nhật thông tin một bài học"""
  updateLesson(input: UpdateLessonInput!): LessonMutationResponse!
  deleteLesson(id: ID!): LessonMutationResponse!
  login(input: LoginInput!): AuthPayload!
  logout: LogoutResponse!
  refreshToken: RefreshPayload!
}

input CreateCourseInput {
  title: String!
  code: String!
  description: String
  teacherId: ID
}

input UpdateCourseInput {
  id: ID!
  title: String
  description: String
  code: String
  teacherId: ID
}

input AiGenerateInput {
  content: String!
  customRequest: String
  questionTypes: [QuestionTypeConfig!]
  language: String! = "vi"
}

input QuestionTypeConfig {
  type: QuestionType!
  numberOfQuestions: Int!
}

input CreateUserInput {
  name: String!
  code: String!
  email: String!
  password: String!
  dateOfBirth: String!
  role: UserRole!
}

input UpdateUserInput {
  name: String
  code: String
  email: String
  password: String
  dateOfBirth: String
  role: UserRole
  id: ID!
}

input CreateChapterInput {
  title: String!
  description: String
  courseId: String
}

input UpdateChapterInput {
  title: String
  description: String
  courseId: String
  id: ID!
}

input CreateLessonInput {
  title: String!
  description: String
  content: String
  videoUrl: String
  chapterId: ID
  type: LessonType
  link: String
  questions: [QuestionDetailInput!]
  questionTypeObjects: [QuestionTypeObjectInput!]
}

input QuestionDetailInput {
  question: String!
  answer: String!
  mcOptions: [MCOptionInput!]
  questionType: QuestionType!
}

input MCOptionInput {
  choice: String
  description: String
}

input QuestionTypeObjectInput {
  type: String
  numberOfQuestions: Float
}

input UpdateLessonInput {
  title: String
  description: String
  content: String
  videoUrl: String
  chapterId: ID
  type: LessonType
  link: String
  questions: [QuestionDetailInput!]
  questionTypeObjects: [QuestionTypeObjectInput!]
  id: ID!
}

input LoginInput {
  email: String!
  password: String!
}

type Subscription {
  userChanged(operation: String): ChangedPayload!
  chapterChanged(operation: String): ChangedPayload!
  lessonChanged(operation: String): ChangedPayload!
}